<!doctype html>
<html lang="en-US">
  <head>
    <title>On the River</title>
    <script>
      // function walk(node, callback) {
      //   callback(node);
      //   node = node.firstChild;
      //   while (node) {
      //     walk(node, callback);
      //     node = node.nextSibling;
      //   }
      // }

      function walk(node, callback) {
        callback(node);
        for (var i = 0; i < node.childNodes.length; i++) {
          walk(node.childNodes[i], callback);
        }
      }

      document.addEventListener('DOMContentLoaded', function() {
        // Change heading color to red and font size to 48px
        var h1 = document.lastChild.childNodes[2].childNodes[1];
        h1.style.color = "red";
        h1.style.fontSize = "48px";

        // Select all paragraph elements and log the number of them
        var paragraphs = document.getElementsByTagName("p");
        console.log(paragraphs.length);

        // Log number of paragraph elements using walk function
        var paraCount = 0;
        walk(document, function(node) {
          if (node.nodeName === "P") {
            paraCount++;
          } 
        });

        console.log(paraCount);

        // Retrieve the first word of each paragraph and log the entire list
        var firstWords = [];

        var paragraphs = document.querySelectorAll("p");
        for (var i = 0; i < paragraphs.length; i++) {
          var text = paragraphs[i].textContent.trim();
          var words = text.split(" ");
          firstWords.push(words[0]);
        }

        console.log(firstWords);

        // Retrieve the first word of each paragraph and log the entire list using walk

        var words = [];

        walk(document, function(node) {
          if (node.nodeName === "P") {
            var text = node.textContent.trim();
            var word = text.split(" ")[0];
            words.push(word);
          }
        });

        console.log(words);

        // Add the class stanza to each paragraph except the first
        var first = true;

        walk(document, function(node) {
          if (node.tagName === "P") {
            if (first) {
              first = false;
            } else {
              node.classList.add("stanza");
            }
          }
        });

      });


    </script>
  </head>
  <body>
    <h1>On the River</h1>
    <p>A poem by Paul Laurence Dunbar</p>

    <p>
      The sun is low,<br>
      The waters flow,<br>
      My boat is dancing to and fro.<br>
      The eve is still,<br>
      Yet from the hill<br>
      The killdeer echoes loud and shrill.
    </p>
    <p>
      The paddles plash,<br>
      The wavelets dash,<br>
      We see the summer lightning flash;<br>
      While now and then,<br>
      In marsh and fen<br>
      Too muddy for the feet of men,
    </p>
    <p>
      Where neither bird<br>
      Nor beast has stirred,<br>
      The spotted bullfrog's croak is heard.<br>
      The wind is high,<br>
      The grasses sigh,<br>
      The sluggish stream goes sobbing by.
    </p>
    <p>
      And far away<br>
      The dying day<br>
      Has cast its last effulgent ray;<br>
      While on the land<br>
      The shadows stand<br>
      Proclaiming that the eve's at hand.
    </p>
  </body>
</html>